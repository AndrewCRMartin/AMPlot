\documentstyle[a5,iff,fignum]{report}

\newcommand{\amplot}{{\bf AMPlot2}}
\newcommand{\RA}[1]{\mbox{{\em Right-Amiga}--{\bf #1}}}
\newcommand{\degree}{\mbox{$\mbox{}^\circ$}}

\hyphenation{promp-ted}
\hyphenation{pro-ject}
\hyphenation{Post-Script}

\makeindex
\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% COPYRIGHT %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{center}
\Large\sf SciTech Software \bf Licence\index{Licence} Agreement
\end{center}
\vspace*{1ex}
This software is protected by United Kingdom Copyright\index{Copyright}
Law and International 
Treaty provisions. You must therefore treat this software like a book with the 
exception that you are authorised to make {\bf two} backup\index{Backing Up}
copies for the sole purpose of protecting your investment in this software.

The software is licensed for use on one Amiga computer at any one time by any
number of people. Thus, you 
may freely move the software from one computer to another as long as there is no 
possibility of the software being used at one location while it is being used at 
another location. Just as a book may only be read by one person at a time (unless 
it is illegally photocopied\ldots), this software may only be used by one person 
on a single computer at one time. If this software is in use on more than one 
computer at the same time, you are in breach of {\sf SciTech Software's} 
copyright and of this licence agreement. Consequently, you are breaking the law 
and forfeit the right to use this software.

\vspace*{1em}
\begin{center}
\Large\bf Warranty\index{Warranty}
\end{center}
\vspace*{1ex}
The physical diskette and documentation are warranted\index{warranty} to be free 
from defects in 
materials and workmanship for thirty (30) days from the date of purchase. If a 
defect in the diskette or the documentation is notified within 30 days, {\sf 
SciTech Software} will replace the defective diskette and/or documentation. Such 
warranty is limited to the replacement and shall not, in any event,
encompass any other damages, 
including, but not limited to, loss of profit, special, incidental, consequential, 
or other claims.

The program and documentation is sold ``as is'' and without warranty as to 
performance, merchantability, or fitness for a particular purpose. In particular,
while every effort has been made to make the PostScript output of this program
match the requirements of the PostScript and EPSF standards, no guarantee is made
that the software will work with all PostScript software. If you identify any
incompatibilities, you are encouraged to report them on the bug or enhancement
request forms supplied.

This warranty does not affect your statutory rights.

\vspace*{1em}
\begin{center}
\Large\bf Registration
\end{center}
\vspace*{1ex}
Please complete and return the registration\index{Registration}
form at the back of this manual.
Doing so will entitle you to updates to the software. Also supplied at the back 
of the manual and on the disk are Bug Report and Enhancement Request forms.

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% INTRODUCTION %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Introduction}
\amplot\ is a flexible scientific and technical graph plotting program for the 
Commodore Amiga\footnote{Amiga, Workbench and Kickstart are trademarks of 
Commodore-Amiga, Inc.}
which produces PostScript\footnote{PostScript is a trademark of Adobe Systems, Inc.},
HPGL\footnote{HPGL is a trademark of Hewlett Packard, Inc.},
and IFF-DR2D output.
%
The program is fully compatible with\index{AmigaDOS} AmigaDOS~V2.0, the enhanced 
chip set and the Amiga A600 and A3000.
%
The PostScript\index{PostScript} produced by \amplot\ is fully compatible with the 
PixelScript\footnote{PixelScript is a trademark of Pixelations, Inc.} 
PostScript\index{PostScript} interpreter available from Pixelations, Inc.\ 
and the SaxonScript\footnote{SaxonScript is a trademark of Saxon Industries.}
interpreter available from Saxon Industries 
as well as the public domain PostScript (Post) and HPGL\index{HPGL} (PLT:) 
interpreters. 
These allow you to produce output at the full resolution of your printer whether 
it is a dot-matrix, an ink-jet, or a laser printer. 
You can even have the output PostScript files processed by a 1200 or 
2400--dot-per-inch typesetting machine.

Unlike most graph-plotting programs on the Amiga, the emphasis in \amplot\ is on 
the quality of output---the screen representations of graphs are only 
approximations. \amplot\ uses a hires, interlaced screen\index{screen display}
on which a maximum of three
pen\index{pens} colours may be displayed (in addition to the background colour).

\amplot\ is designed to produce reproduction-quality graphs for use in scientific 
and technical documents. Four major graphing formats are supported: scatter plots, 
line plots, bar charts and pie charts. Within these major categories, numerous 
options are available.

\amplot\ also has an extensive ARexx\footnote{ARexx is Copyright Wishful Thinking 
Development Corp.} interface which allows control over the graph, 
plotting of additional points and definition of functions for fitting using the 
fitting routines included in \amplot.


\section{Installation}
\amplot\ is\index{Installation} supplied on a single floppy disk and
requires V1.3\index{AmigaDOS}, or above, of the operating system.
%
Ideally, the program should be run with V2.0\index{AmigaDOS} on a machine 
possessing a de-interlacing board, although it will run satisfactorily on other 
systems. IFF-DR2D\index{IFF-DR2D} output is only available on systems with 
the {\tt iffparse.library}
in the {\tt LIBS:} directory and full functionality is only available if you have 
ARexx.\index{ARexx}
Both the {\tt iffparse.library} and ARexx are supplied as part of the V2.0 operating 
system release, but should be available for a V1.3 system.
%
\amplot\ requires at least 1M byte of memory\index{memory} and two disk drives, 
or a hard disk\index{Disks}, are strongly recommended.

The {\bf Install} drawer on the \amplot\ disk contains a number of installation 
scripts for installing the program on different systems. The scripts may all be 
executed by double clicking on the associated icon and they will all perform the 
following steps:
\begin{itemize}
\item Create a directory for \amplot.
\item Install the \amplot\ program and its associated files.
\item Install the Times and Helvetica fonts from the Extras disk if these are not 
already installed on your Workbench disk or system partition of a hard disk.
\item Install a samples directory with example datafiles and ARexx scripts.
\end{itemize}

When performing the installation, you have the following options, depending which 
icon you use:
\begin{description}
\item[Install-1.3-Floppy] Installs \amplot\ on an AmigaDOS~1.3 floppy disk system. 
   You should have a blank disk ready. The script will format the disk for you.
\item[Install-2.0-Floppy] Installs \amplot\ on an AmigaDOS~2.0 floppy disk system. 
   You should have a blank disk ready. The script will format the disk for you.
\item[Install-1.3-DH0] Installs \amplot\ on an AmigaDOS~1.3 hard disk system. The 
\amplot\ drawer will be created on a hard disk called {\tt DH0:}.
\item[Install-2.0-DH0] Installs \amplot\ on an AmigaDOS~2.0 hard disk system. The 
\amplot\ drawer will be created on a hard disk called {\tt DH0:}.
\item[Install-1.3-Work] Installs \amplot\ on an AmigaDOS~1.3 hard disk system. The 
\amplot\ drawer will be created on a hard disk called {\tt Work:}.
\item[Install-2.0-Work] Installs \amplot\ on an AmigaDOS~2.0 hard disk system. The 
\amplot\ drawer will be created on a hard disk called {\tt Work:}.
\item[Install-1.3-Ass] Installs \amplot\ on an AmigaDOS~1.3 hard disk system. The 
\amplot\ drawer will be created in a logical directory called {\tt INSTALL:}.
First, you must open a CLI (shell) window and assign {\tt INSTALL:} to the directory 
into which you wish \amplot\ to be installed. For example, if you want the \amplot\ 
drawer to be created in a directory called\\
{\tt User:Utilities}, you must type the command: 
\begin{verbatim}
      ASSIGN INSTALL: User:Utilities
\end{verbatim}
before double-clicking on the icon.
\item[Install-2.0-Ass] Installs \amplot\ on an AmigaDOS~2.0 hard disk system. The 
\amplot\ drawer will be created in a logical directory called {\tt INSTALL:}.
First, you must open a CLI (shell) window and assign {\tt INSTALL:} to the directory 
into which you wish \amplot\ to be installed. For example, if you want the \amplot\ 
drawer to be created in a directory called\\
{\tt User:Utilities}, you must type the command: 
\begin{verbatim}
      ASSIGN INSTALL: User:Utilities
\end{verbatim}
before double-clicking on the icon.
\end{description}

The 2.0 scripts set up \amplot\ to require {\tt diskfont.library} V37+. 
AmigaDOS~2.0 supplies\index{diskfon.library} 2 versions of the 
{\tt diskfont.library}, the library used to load screen fonts from disk. Depending 
on the release of AmigaDOS~V2.0, the version which is installed when you buy your 
computer may not support the scalable Compugraphic\footnote{Compugraphic fonts are
supplied with AmigaDOS~2.0 under licence from Agfa Corp.} fonts. If your {\tt LIBS:} 
directory contains a library called {\tt diskfont.classic} which is smaller than 
{\tt diskfont.library} (use the command {\tt LIST LIBS:} from a CLI/Shell to see the
file sizes), then you already have the V37+ {\tt diskfont.library}. If {\tt LIBS:} 
contains only {\tt diskfont.library}, it is likely that you have only the `classic' 
version of the library and the V37+ version of the library is stored on your {\bf 
AmigaFonts2.0} disk. The {\bf Install-2.0-DFLib} script will install this library 
and the Compugraphic fonts onto your system disk.

It is recommended that you run \amplot\ from the Workbench since it is only possible 
to set certain defaults through\index{tooltypes} icon tooltypes.
If you intend to run \amplot\ from the CLI/Shell, you should add your new \amplot\
directory to your path using the command:
\begin{verbatim}
      PATH <directory> ADD
\end{verbatim}
where \verb1<directory>1 is the path and name of the directory in which \amplot\ is 
installed.
If you are using V1.3 of the AmigaDOS, you should place this command in your 
{\tt Startup-Sequence} (in the {\tt S:} directory). 
If you are using AmigaDOS V2.0 or above, it should be placed in {\tt S:User-Startup}.

\section{Running \amplot}
From the Workbench, \amplot\ is run by double-clicking on its icon. A 4-colour high 
resolution interlaced screen\index{screen display} will be opened with 2 windows. 
The main large window is 
used to manipulate your graph. The smaller window at the bottom of the screen is 
used to display messages and information from the program. If you are using an NTSC 
machine, the message window will be obscured by the main window. However, when 
messages appear, the window will come to the front and should be sent to the back by 
clicking on the gadget at the top right of the message window.

From a CLI/Shell, \amplot\ is started by typing:
\begin{verbatim}
      AMPlot2 [datafile]
\end{verbatim}
where \verb1[datafile]1 is an optional datafile containing the data to be plotted. 

\amplot\ is a graph plotting program---clearly it needs some data to plot!
The file of data which is used as input to the program can be as simple as two 
columns of numbers or may contain a multitude of commands to describe the exact 
format of your graph (Chapter~\ref{ch:datafile}). You can create such a file with 
any text editor\index{editing} and can call an editor from within \amplot\ to 
create or modify a 
file (see Section~\ref{sec:edit}. You can also send data to \amplot\ using ARexx.




\section{Printing Your Graph}
Once you have created your graph, you will want to create a printed version.
\amplot\ can generate 4 types\index{PostScript,EPSF,HPGL,IFF-DR2D} of output:
\begin{itemize}
\item PostScript
\item Encapsulated PostScript (EPSF)
\item Hewlett Packard Graphics Language (HPGL)
\item IFF-DR2D (IFF structured drawing format)
\end{itemize}

If you select EPSF or IFF-DR2D output, you must create a file and import it into a 
suitable desk-top publishing (DTP) program which will allow you to rotate and scale 
the graph for inclusion in a larger document.

To send PostScript or HPGL output directly to a printer\index{producing hard copy} 
or plotter, you should simply select a filename of {\tt SER:}\ or {\tt PAR:}\ 
depending on whether your printer 
or plotter is connected to the serial (RS232) or parallel (Centronics) port.
Alternatively, you can save your plot to a file which should then be copied to the 
appropriate port. Note that you must {\em not\/} send PostScript or HPGL files to the 
{\tt PRT:}\ device. You may also use PostScript or HPGL interpreters so send your 
plot file to a Preferences supported printer. The public domain HPGL interpreter, 
{\tt PLT:}\ written by Rich Champeaux and Jim Miller and the SaxonScript PostScript 
interpreter are both implemented as devices, so plots may simply be sent to {\tt 
PLT:}\ or {\tt PSC:}\ respectively.

If you wish, you could create an ARexx\index{ARexx} script to plot a 
file and send it to the 
appropriate device. An example ARexx script which causes a file to be plotted and 
processed by the PixelScript PostScript interpreter is provided in the {\bf Samples} 
drawer.






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% TUTORIAL %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{tutorial}


%%%%%%%%%%%%%%%%%%%%%%%%%% MENUS & REQUESTERS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\chapter{Menus and Requesters}
\label{ch:menus}
This chapter will describe each of the menus and requesters with its usage. The 
sections will be titled by menu name, with subsections matching menu items.
\section{The Project Menu}
\subsection{Open}
{\bf Project/Open}\index{Open} (abbreviation: \RA{O}) brings up a file requester 
allowing you to read in a datafile for display.
\subsection{Save}
{\bf Project/Save}\index{Save} (abbreviation: \RA{S}) re-saves the current dataset 
together with the necessary commands (see Chapter~\ref{ch:datafile}) to reproduce 
the same graph format. If the current data has not been saved, a file requester will 
be displayed.
\subsection{Save As}
{\bf Project/Save As}\index{Save As} displays a file requester allowing you to specify
 a datafile for 
saving the current dataset together with the necessary commands (see 
Chapter~\ref{ch:datafile}) to reproduce the same graph format.

\subsection{Edit}
\label{sec:edit}\index{edit}
If no file has previously been opened, {\bf Project/Edit}\index{Edit} will bring up 
a file 
requester defaulting to a file named {\bf ram:AMPlot.dat}. If a file has already been 
opened with {\bf Project/Open}, the file requester will default to this file. 
When the file is selected the editor will be started and you will be able to make 
changes to the file. 

If you have AmigaDOS~V2.0, the first invocation of \amplot\ will create a public 
screen named ``AMPlot''. When you invoke the editor, \amplot\ will temporarily turn
on the `Shanghai' mode so that the editor will open on the \amplot\ screen. Clearly 
this will not work if the editor opens its own screen (in which case the editor's 
screen will be opened in front of \amplot). In addition, some editors (such as 
Lattice LSE V2.10A), although they open a window on the Workbench, refuse to be 
Shanghai'd. This behaviour may be over-ridden  using the {\tt NOSHANGHAI} icon
tooltype (see Chapter~\ref{ch:tooltypes}). Note also that Lattice LSE will not run
if \amplot\ has been started from the Workbench, unless you copy the files 
{\tt lse.dat}, {\tt lse.msg} and {\tt lse.hlp} to the directory in which you 
have \amplot.

If you have AmigaDOS~V1.3, or this is the second invocation of \amplot\ under 
AmigaDOS~V2.0, the editor will open on the Workbench which will temporarily be 
brought in front of the \amplot\ screen.

When you exit the editor, you will be asked if you wish to replace the current plot 
(if there is one) and your modified plot will be displayed.

By default, the system editor, {\bf ED} which is in the {\tt C:} directory, will be 
used. Should you wish to use a\index{environment variables, EDITOR}
different editor, you should specify it by setting the environment variable {\bf 
EDITOR}. To do this, you should open a CLI/Shell window and type the command:
\begin{verbatim}
      SETENV EDITOR <editor>
\end{verbatim}
where \verb1<editor>1 is the path and name of the editor you wish to use. Typically, 
you would add this command to your {\tt S:User-Startup} (AmigaDOS~V2.0) or
{\tt S:Startup-Sequence} (AmigaDOS~V1.3).

\subsection{Plot}
\subsubsection{PostScript}
{\bf Project/Plot/PostScript}\index{Plot}\index{PostScript} (abbreviation: \RA{P}) 
produces a PostScript file for printing. Again, a file requester will 
be displayed to allow you to specify the filename. If the EPSF\index{EPSF}
gadget in the {\bf Project/Paper} requester (see below) is selected, 
the PostScript output will 
match the requirements of the EPSF (Encapsulated PostScript Format)
standard for importing into other documents using, for example, 
desk-top\index{DTP} publishing (DTP) programs such as Saxon Publisher, Professional 
Page and PageStream.
\subsubsection{HPGL}
{\bf Project/Plot/HPGL}\index{Plot}\index{HPGL} (abbreviation: \RA{H}) 
produces an HPGL file for plotting. Again, a file requester will 
be displayed to allow you to specify the filename. HPGL is a plotting language used 
mainly by pen plotters. The public domain HPGL interpreter, {\bf PLT:}, allows 
printing of HPGL files on any Preferences supported printer.
\subsubsection{IFF-DR2D}
{\bf Project/Plot/IFF-DR2D}\index{Plot}\index{DR2D} (abbreviation: \RA{I}) 
produces an IFF-DR2D file for importing into other documents using DTP programs 
such as PageStream and Saxon Publisher and the ProVector structured drawing program
which support the DR2D format.
Again, a file requester will be displayed to allow you to specify the filename. 


\subsection{Paper}
{\bf Project/Paper}\index{Paper} displays a requester in which you can set 
the size of the output graph and, for PostScript and HPGL plots, its offset 
from the bottom left hand corner of the paper. PostScript assumes paper is in 
portrait orientation while HPGL assumes landscape orientation. These 
dimensions are specified in inches. The default paper size and position places 
the graph at the top of a sheet of A4 paper with a suitable offset at the left to 
allow the paper to be bound when using PostScript output. The defaults may be altered 
using icon tooltypes (see Chapter~\ref{ch:tooltypes}).
The dimensions actually refer to the bounds of the 
graph itself. The axis labels and titles will fall outside this area so the total 
size of the graph will be somewhat larger than the specified size.
In addition there is a checkbox for making the PostScript output conform to the
EPSF\index{EPSF} standard. When this gadget is selected, the Offset gadgets become 
redundant since the program which imports the EPSF file will handle offsets and image 
size. If the size of text on the graph is important, however, the sizes specified 
in this requester should match the final required graph size as closely as possible.


\subsection{Set Pens}
\amplot\ \index{Set Pens}has six `pens'. Each pen has an associated colour (for 
screen and HPGL output), thickness of line (for PostScript, EPSF and DR2D output), 
datapoint mark and join feature.
{\bf Project/Set Pens} displays a requester in which you can set the colour and 
thickness for each pen. Three colours (as well as the background colour) are 
available for display on the screen. Values greater than 3 may be specified if your 
HPGL plotter has more than 3 pens. The screen display will be restricted to one of 
the 3 screen pens. The line thickness is specified in points 
(1pt~$=\frac{1}{72}$inch). Your data may be assigned to any of the six pens. By 
default, the first set of data is displayed in Pen~1, the second in Pen~2, etc.
This may be changed using the {\bf Pen} item of the {\bf Lines} menu (See 
Subsection~\ref{ss:pen}).
However, the axes are always displayed in Pen~6 and the grid across the graph is 
always in Pen~5.

\subsection{Screen Palette}
{\bf Project/Screen Palette}\index{screen palette} displays a requester which 
allows you to select 
your preferred colours for screen display. These may be chosen to minimise 
interlace flicker if you do not have a de-interlacing board. Default values may be 
specified using the appropriate icon tooltypes (see Chapter~\ref{ch:tooltypes}).

The palette requester consists of three sliders for the red, green and blue 
components of a colour, a panel of 4 colour panel gadgets and 4 gadgets labelled 
{\bf COPY}, {\bf RANGE}, {\bf OK}, and {\bf CANCEL}. To modify a colour, it is 
necessary to click on 
the colour panel gadget of the colour to be modified and then to use the 3 sliders 
to set the required colour. Clicking on the {\bf OK} gadget will accept the new 
combination of colours, while the {\bf CANCEL} gadget will reset the original colours.

The {\bf COPY} gadget  will copy the currently selected colour into another colour: a 
colour panel gadget selected after clicking on {\bf COPY} will inherit the 
colour which was current when {\bf COPY} was selected. The {\bf RANGE} gadget 
causes a range of colours to be set. Having selected the {\bf RANGE} gadget, 
two colour panel gadgets should be 
selected: the colours of the colour panel gadgets between these will then be 
modified to create a smoothly graduated range.

Clicking the left mouse button on one of the letters R, G, or B, will cause the 
letters to change to H, S and L. (Clicking again will change back to R, G and B). 
The HSL colouring model is an alternative to RGB. The H~slider controls the hue from 
red at the far left through green and blue and back to red at the far right. The 
S~slider controls the saturation from fully saturated at the right to completely 
unsaturated (white) at the left. The L~slider controls the luminance (brightness) 
from full luminance at the right to zero luminance (black) at the left.

\subsection{Screen To Back}
{\bf Project/Screen To Back} sends the \amplot\ screen to the back, behind any other 
screens including the Workbench.

\subsection{About}
{\bf Project/About} gives copyright information about the program and the name of the 
ARexx port if you have ARexx\index{ARexx} on your system. The ARexx port name will 
be {\tt AMPlot.n}, where {\tt n} is the invocation number. Thus, the first time 
you run \amplot, {\tt n} will be 1; if you start \amplot\ again without quitting 
from the first invocation, {\tt n} will be 2.

\subsection{Quit}
{\bf Project/Quit} (Abbreviation \RA{Q}) \index{Quit} exits \amplot. 
You may also exit by hitting the display window close gadget.
In both cases, unless no data has been loaded, a requester will appear checking 
you really want to exit.


\section{The Style Menu}


\subsection{XY}
{\bf Style/XY} \index{XY}\index{Line Plot} is used to select the default 
line graph style. That is, each datapoint is joined by a line. 
The {\bf Style/Line Setup} menu item may be used to add marks to each 
datapoint. Each line may be displayed in any one of the six available pens (See 
Subsection~\ref{ss:pen}).


\subsection{Scatter}
The {\bf Style/Scatter} \index{Scatter Plot} graph style is similar to the {\bf XY} style, 
but, by default, the datapoints are not joined. Rather, they are marked, by default, 
with crosses. 
These defaults may be changed using the {\bf Style/Line Setup} menu item 
(Subsection~\ref{ss:dp}).


\subsection{Bar}
The {\bf Style/Bar} \index{Bar Chart} menu item displays your data as 
a bar chart. By default, each 
successive set of data is overlaid on the last set of data, but with the bars 
shrunk in width by 20\%. This shrink factor, together with other style options, 
such as outline, grouped and stacked charts may be set using the {\bf Style/Bar 
Style} menu option (Subsection~\ref{ss:barstyle}). You may fill the bars of 
your chart 
using the {\bf Fills} sub-items of the {\bf Lines} menu (Subsection~\ref{ss:fill}).
Note that the first bar will have a width dependent on the minimum X-boundary of 
the graph. Depending on your data, you may find it necessary to change the minimum 
x-boundary using the 
{\bf Set Axes} item of the {\bf Axes} menu (Subsection~\ref{ss:bounds}).
Alternatively, you may supply a datapoint in the graph with zero Y-value at a 
suitable X-value to achieve the correct bar width.

\subsection{Pie}
The {\bf Style/Pie} \index{Pie Chart} menu item displays your data as 
a Pie chart. This menu item will be disabled unless your datafile contains the 
keywords {\tt PIE} or {\tt COLUMNS 1}. Only one set of data may 
be displayed and a number of features of the other graph styles are not relevant. 
The `slices' of the pie may be filled using the {\bf Fills} item of the
{\bf Lines} menu (Subsection~\ref{ss:fill}) and may be ejected with the {\bf 
Style/Eject Slice} menu item. 


\subsection{Errors}
{\bf Style/Errors} (abbreviation: \RA{E}) allows \index{Errors} you to switch error 
bars on and off on your graph, providing 
error bar data has been supplied in your datafile.
The dataset may contain three columns of data, such that the same value is
used for both positive and negative parts of the
error bars or four columns of data specifying separate positive and
negative errors. The first value read (i.e.\ that in column 3 of the dataset)
is the negative error, the second value (i.e.\ that in column 4 of the dataset)
is the positive error. If any error value (positive or negative) is zero, no bar
will be drawn for this half of the error.

\subsection{Eject Slice}
{\bf Style/Eject Slice}\index{eject} allows slices of a Piechart to be 
ejected or replaced. 
Having selected this menu item, you must click on the pie slice to move. The 
percentage by which the slices are ejected is set in the {\bf Style/Pie Setup} 
requester.

\subsection{Line Setup}
\label{ss:dp}
{\bf Style/Line Setup} \index{Line Setup} (abbreviation: \RA{L}) displays a 
requester in which you may set the data point mark 
to be used with each pen in the XY and Scatter styles. Each pen also has a {\bf Link}
toggle gadget. If this is switched on for every pen, the Scatter and XY styles become 
equivalent. {\bf Link} causes datapoints to be joined by a line, even 
when the Scatter 
style has been chosen. This allows you to display one set of data simply as 
datapoint marks, with another set of data with the data points joined. This may 
be used if you have a set of experimental data which you wish to display as, for 
example, filled circles and a fitted curve which may be displayed with the join 
feature switched on, but with no datapoint marks. 

This requester also allows you to specify the width of the cross parts of error 
bars and the size of datapoint marks. Both of these values are specified in points.

\subsection{Bar Setup}
\label{ss:barstyle}
{\bf Styles/Bar Setup} \index{Bar Setup} displays a requester in which 
you can control the exact format of bar charts.

You may change the default (overlaid) barchart style to a grouped style 
\index{Bar Grouped} where successive sets of data are displayed adjacent to one 
another, or to a stacked style, where successive sets of data are stacked on top 
of eachother. There are certain restrictions on these 2 styles---you must have the 
same number of data points in each data set and the width of each bar must be the 
same. Normally, these styles are used for displaying numeric data on the Y-axis and 
largely non-numeric data (such as months, years, or names) along the X-axis. 
Thus, in the datafile, it is easiest to specify the X-axis data as 1,2,3\ldots\ 
switch off the X-axis labels with the {\bf No X-axis labels} gadget in the 
{\bf Axis \& Pie Labels} item of the {\bf Text} menu and supply your own X-axis 
labels using the same requester (Section~\ref{ss:bplab}).
Conversely the outline style \index{Bar Outline} is used when it is the area under 
the graph which is important and the bars may be of differing widths.

You may set the percentage by which successive sets of data are shrunk
\index{Bar Shrink} using the supplied gadget
and whether or not the first data set is shrunk using the {\bf Shrink First} 
checkbox. Bars are shrunk always shrunk in the grouped style; should you wish bars 
not to be shrunk, simply set the shrink factor to zero. 

The {\bf Fill all bars} checkbox controls whether fills are applied to the whole 
dataset or to individual bars.


\subsection{Pie Setup}
The {\bf Styles/Pie Setup}\index{pie setup} requester allows you to define where 
the first slice 
of the piechart is (0 = right-pointing x-axis, 90 = up-pointing y-axis, etc.).
Labels added to piecharts using the {\bf Text/Axis \& Pie Lables} requester will 
remain associated with the correct slice while labels added with the {\bf Text/Extra 
Labels} requester will not move as the starting angle of the piechart is changed.
This requester also allows you to specify the percentage by which slices are 
ejected from the pie.



\section{The Axes Menu}

\subsection{LogX}
{\bf Axes/LogX} causes \index{Log Axes} the X-axis to be displayed on 
a log scale (to base 10). Subticks will be 
placed between the labelled ticks. If your axis only
spans one log value (i.e.\ non-log values from 0.1 to 1, 1 to 10, 10 to 100, 
etc.), subticks will also be labelled if you switch on the {\bf Subticks} checkbox 
in the {\bf Axes/Set Axes} requester. \amplot\ will check that your data are valid 
for taking logs (i.e.\ all values are greater than zero). If the data are invalid, 
selecting this option will simply have no effect.


\subsection{LogY}
{\bf Axes/LogY} causes \index{Log Axes} the Y-axis to be displayed on 
a log scale (to base 10). Subticks will be 
placed between the labelled ticks. If your axis only
spans one log value (i.e.\ non-log values from 0.1 to 1, 1 to 10, 10 to 100, 
etc.), subticks will also be labelled if you switch on the {\bf Subticks} checkbox 
in the {\bf Axes/Set Axes} requester. \amplot\ will check that your data are valid 
for taking logs (i.e.\ all values are greater than zero). If the data are invalid, 
selecting this option will simply have no effect.



\subsection{Boxed}
{\bf Axes/Boxed} (abbreviation: \RA{B}) causes axis \index{Boxed Axes} 
lines to be placed to the top and right of the graph. The axes are drawn in Pen~6.


\subsection{Grid}
{\bf Axes/Grid} (abbreviation: \RA{G}) \index{Axis Grid} switches on a grid with 
grid lines along the tick mark positions. The grid is drawn in Pen~5.
When you select the grid, the boxed option will be turned on automatically.
If you have log axes, the grid will only be placed at the major tick positions. By 
switching on subticks in the {\bf Axes/Set Axes} requester, the grid will also be 
drawn at the subtick positions of log axes. The grid cannot be drawn at subtick 
positions of linear axes.

\subsection{Set Axes}
\label{ss:bounds}
{\bf Axes/Set Axes} (abbreviation: \RA{A}) displays a requester which allows you to 
define the minimum and maximum 
values displayed on each axis (bounds)\index{Bounds} and the spacing of ticks 
\index{Ticks} and subticks. 
If you change any of these, you may select the appropriate {\bf Auto} gadget to 
restore the program's calculated values.

The {\bf Clip} checkbox\index{clipping data} causes data outside the specified 
bounds not to be plotted 
while the {\bf Sub} checkbox switches on and off subticks on both axes. If you 
require subticks on one axis only, they should be switched on and the 
subtick spacing for the axis where they are not required should be set to 
0.0.
The {\bf Sub} checkbox also causes grid lines to be plotted at subtick positions of 
log axes and labels to be placed at subtick positions of log axes if they span only 
1 log unit.

If you enter a minimum value which is greater than the maximum value for that axis, 
the minimum and maximum values will be swapped automatically. If bounds are 
supplied for a log axis which span 0.0, a requester will be displayed asking you to 
enter positive bounds. Similarly, if your tick step size will generate more than 
1000 ticks, you will be asked to enter a larger value.

Ticks and subticks, like the axes, are drawn in Pen~6.

\subsection{Follow Zero}
{\bf Axes/Follow Zero} \index{Axis Follow Zero} causes the axes to follow 
the zero values on the graph, rather than being placed at the far left and bottom 
of the graph. If your graph does not span a zero value on both axes, a requester 
will appear to check this is really what you want to do.


\section{The Text Menu}

\subsection{Title}
{\bf Text/Title} \index{Title} displays a requester in which you may specify 
a title for the graph. 
The coordinates which you specify are the bottom, centre of the title (i.e.\ the 
title is centre, bottom justified). In all requesters which require graph coordinates
to be specified you may click in the main graph window rather than typing in numbers.
When you click, the coordinates will be transferred into the requester.
By default the title will be centred on the 
graph at 90\% of its height. Choosing the {\bf Centre} gadget will restore this 
default position. Once a title has been specified with its coordinates, the title 
will be locked to these coordinates. Thus, if you change the bounds of the graph, 
the title will move. You will then need to return to this requester to restore 
the position on the graph where you wish the title to appear. Clearing the title 
string gadget will switch the title off. You may also specify the name and size
of the font to be used. (See Chapter~\ref{ch:fonts}.)


\subsection{Axis Titles}
{\bf Text/Axis Titles} \index{Axis Titles} displays a requester in which you can 
enter titles for the axes. The requester also lets you specify the fonts to be used
(Chapter~\ref{ch:fonts}).
The labels will be centred along the axes. Although the Y-axis title is displayed 
down the screen, on paper, the label will be displayed sideways, reading up the paper.


\subsection{Axis \& Pie Labels}
\index{Axis Labels}
This requester allows you to set the fonts used for the axis labels;
the font specified for X-axis labels will also be used for labels placed next 
to slices of a piechart. 
The precision of the axis labels may also be set. This is the number of decimal 
places to be displayed. If a negative value is given, exponential form is used for 
the labels. If a label will require more than 24 characters to print, it will 
automatically be switched to exponential form. For log axes, only the sign of the 
precision is taken into account---if positive, the precision will be 0 for label 
values greater than 1.0 and will be adjusted automatically for label values less 
than 1.0; if negative, exponential form will be used with 1 decimal place.

The three check boxes allow labelling of the axes to be switched off and labels 
on the x-axis to be centred. This can be useful for barcharts.

Clicking the {\bf Bar/Pie Labels} gadget brings up a further Bar/Pie Labels requester.

\subsubsection{Bar/Pie Labels Requester}
\label{ss:bplab}
This requester allows you to specify text for each bar or pie slice. You 
can step through the labels with the {\bf Next} and {\bf Prev} gadgets. The 
{\bf Remove} gadget removes all the labels. For datasets containing more than 100 
items, this requester 
will not be displayed since it would not be possible to place all the 
labels along the x-axis or to see all the labels crowded around a piechart.

With piecharts, the exact position of the label depends on the quadrant of the graph 
into which the label is being placed. (The first quadrant starts from the 
right-pointing horizontal axis, the second quadrant starts at the upward-pointing 
vertical axis, etc.)

\begin{center}
\begin{tabular}{|c|l|}\hline
Quadrant & Justification   \\ \hline
1        & Left            \\
2        & Right           \\
3        & Right           \\
4        & Left            \\ \hline
\end{tabular}
\end{center}

If you require more precise placing of labels you may use the {\bf Text/Extra Labels}
requester described below to place arbitrary additional labels, but note that these 
will not move with the piechart if you change the start angle with {\bf Style/Pie 
Setup}.


\subsection{Key}
{\bf Text/Key}\index{key} displays a requester which allows you to specify 
some text for 
each dataset to create a key. As with the {\bf Bar/Pie Labels} requester you can 
step through the labels with the {\bf Next} and {\bf Prev} gadgets. The font for 
the key is specified here (see Chapter~\ref{ch:fonts}) and the position of the 
first item must also be specified.
This may be done by clicking on the graph. The {\bf Remove} gadget will switch off 
the key. The key will appear as a set of lines and datapoints, or (for barcharts 
and piecharts) a set of appropriately shaded swatches next to the text.


\subsection{Extra Labels}
\label{ss:linlab}
{\bf Text/Extra Labels} \index{Extra Labels} displays a requester in which you may 
add arbitrary labels to your graph.
You must specify the label text, coordinates (bottom, left justified), 
font and font size (see Chapter~\ref{ch:fonts}).
The position of the label may be specified simply by clicking in the main graph 
window.
To change which label is being processed, click on the {\bf Next} or {\bf Prev}
gadgets. You may add as many labels as you like (subject to available memory) and 
may remove labels by clicking on the {\bf Kill} gadget. The {\bf Kill All} gadget 
removes all labels.



\section{The Lines Menu}


\subsection{Pen}
\label{ss:pen}
{\bf Lines/Pen} \index{Pens} allows you to alter the default mapping of pen to 
dataset. After typing a
pen number into the text gadget and selecting the {\bf OK} gadget you should click
on a datapoint of a line (you should click on a datapoint 
and not in the middle of a line). This data set will then be displayed in your chosen 
pen.


\subsection{Style}
The subitems of {\bf Lines/Style} \index{Line Style} allows you to set the line 
style for a dataset. This is independent 
of the pen, so you may have the same pen in solid and dotted line styles. Note 
that the PixelScript PostScript interpreter (V1.1) does not support dashed line 
styles. Note that the exact pattern of lines in an HPGL plot may depend on your 
plotter.


\subsection{Fills}
\label{ss:fill}
Bar charts \index{Bar Fills} and pie charts \index{Pie Fills} may be filled 
using one of 6 shades of grey or hatch styles available 
through this option. This gives a total of 7 shades including white. It is simply 
necessary to select a fill and click within a bar or slice of a pie chart. The 
increasing darknesses  of fills equate to the following hatch patterns:
\begin{center}
\begin{tabular}{|l|l|} \hline
Shade &  Hatch                      \\ \hline
1     &  Upward slant               \\
2     &  Downward slant             \\
3     &  Horizontal                 \\
4     &  Vertical                   \\
5     &  Horizontal \& Vertical     \\
6     &  Upward \& Downward slant   \\ \hline
\end{tabular}
\end{center}
The {\bf Lines/Fill Control} requester allows you to switch between shaded and 
hatched fills.


\subsection{Fill Control}
This\index{fill control,hatching,shading} allows you control over fills within the 
limitations of the display 
device. PostScript, EPSF and IFF-DR2D output allow both hatched and 
shaded fills, while HPGL allows only hatched fills. The screen only shows 
shaded fills. The thickness (for PostScript and IFF-DR2D) and spacing of 
the hatching may also be specified. You cannot mix hatched and shaded fills in a 
single plot. Note that hatching will have different effects with HPGL compared with 
IFF-DR2D and PostScript. Because of the nature of pen plotters, hatches will be 
overlayed in HPGL, while IFF-DR2D and PostScript will fill each area with white 
before hatching.

\subsection{No Fills}
{\bf Fills/No Fills} removes all fills.

\section{The Fitting Menu}


\subsection{Regression}
{\bf Fitting/Regression} \index{Regression} displays a requester in 
which you may specify a degree for linear regression polynomial fitting. 
This fits an equation of the form:
$$y=a+bx+cx^2+dx^3+ex^4\ldots$$
to your data using `singular value decomposition' (SVD) by minimising a $\chi^2$ 
merit function.
The polynomial degree which you specify sets the number of terms in 
the fitted equation. A degree of 2 will fit a straight line. You may specify 
degrees between 2 and 20, but the degree must not be greater than the number of 
datapoints in a dataset. If this is so, a requester will be posted warning you that 
the polynomial degree is too high.
The fitting routine assumes that the all the datapoints have the same
standard deviation. The coefficients derived for the fit will be displayed in the
message window in the order shown in the equation above.

The tolerence specifies the accuracy to which the fitting is performed. If 
the coefficients are of the same order as the tolerence, a much smaller 
value should be specified for the tolerence. The {\bf Write Data} checkbox 
causes detailed information on the fitting to be written to a file called 
{\tt
AMPlotFit.data} in the directory from which \amplot\ was run. This file contains the 
coefficients, variance and covariance matrix for each dataset. These data could be 
processed by an ARexx program to plot confidence limits, etc.\ onto your graph.

Selecting the {\bf Off} gadget will switch the fitted curve off.



\subsection{Robust}
{\bf Fitting/Robust} switches \index{Robust Fitting}
robust straight line fitting on or off. This form of 
fitting weights against values lying outside the normal distribution of values 
observed by the criterion of least absolute deviations. 
For the equation,
$$y = a + bx$$
this function minimises the merit function:
$$\sum_{i=1}^{N}\mid y_i-a-bx_i\mid$$
rather than the $\chi^2$ function minimised in normal linear regression.


\subsection{Fourier}
{\bf Fitting/Fourier} \index{Fourier Smoothing} 
displays a requester in which you may set a 
factor for Fourier transform smoothing to remove noise from your data.
A fast fourier transform (FFT) is 
performed, high frequency oscillations in the data are removed using the smoothing 
factor, and an inverse-FFT is performed on the filtered data.
Smoothing factors greater 
than half the number of data points render the graph virtually feature-less.
The values need not be integers.


\subsection{Rexx Fit}
{\bf Fitting/Rexx Fit} \index{regression,ARexx} displays a requester essentially the 
same as that for {\bf 
Fitting/Regression}. However, the {\bf Macro} gadget produces a file 
requester in which you can specify the name of an ARexx macro. This macro 
is used to define the function to be fitted. Two examples ({\bf 
SimplePoly.rexx} and {\bf Legendre.rexx}) are provided in the {\tt 
Samples} directory. Further details are presented in 
Chapter~\ref{ch:rxfit}.

If you switch on the {\bf Write Data} checkbox, a file named\\
{\tt AMPlotRexxFit.data} will be written in the directory from which \amplot\ 
was run containing the fitting coefficients, variances and covariance 
matrix.


\section{The Rexx Menu}

\subsection{Execute Macro}
{\bf Rexx/Execute Macro}\index{ARexx} (abbreviation: \RA{R}) displays a file 
requester where you can specify the name 
of an ARexx macro to be executed on a one-off basis. Note that any such 
macros which add data to the graph will lose their effect once the graph 
replots. Consequently, they will not produce extra data in PostScript, 
HPGL or IFF-DR2D plots.

This facility is most useful for ARexx communication with other programs. 
For example, asking a spreadsheet to output data to a file then loading 
this file into \amplot. Another useful example is supplied in the {\tt 
Samples} directory. The file {\tt plot.rexx} causes a PostScript file to 
be generated and sent to the PostScript interpreter, PixelScript. Examples of 
sending the plot directly to printers are shown commented out.

\subsection{Install Macro}
This menu item also displays a file requester where the name of an ARexx 
macro can be specified. However, this macro will be installed such that 
it is executed every time the graph replots. Thus a macro which adds data 
to a graph will perform correctly even when producing hard-copy output.

Selecting the {\bf Cancel} gadget of the file requester will remove the 
installed macro.

Note that there are certain restrictions on commands which may be placed 
in installed macros. For example, you cannot use a {\tt PSPLOT} ARexx 
command which would cause a PostScript plot to be generated {\em every\/} 
time the graph replotted.

The following commands are prohibited with installed macros:
\begin{center}
\begin{tabular}{l}
SAVE     \\
OPEN     \\
PSPLOT   \\
HPGLPLOT \\
DR2DPLOT \\
MACRO    \\
\end{tabular}
\end{center}

Because\index{ARexx} both installed and one-off macros share the same ARexx port, 
once a macro is installed these commands will be disabled whether they come 
from the installed or a one-off macro. For example, the one-off macro {\tt
plot.rexx} will not work correctly if another macro is installed since it uses 
the {\tt PSPLOT} ARexx command. Should you need to use commands such as 
{\tt PSPLOT} in a one-off macro therefore, you cannot use installed 
macros at the same time. Instead, the macro you would have installed 
must be called from within your one-off macro, after the {\tt PSPLOT} command and 
before {\tt ENDPLOT}.

\subsection{Debug}
The {\bf Rexx/Debug}\index{ARexx} menu item switches on and off ARexx debugging. When 
debugging is switched on, commands coming in to the \amplot\ ARexx port 
will be echoed to the message window. If \amplot\ has been started from
the CLI/Shell, they will also be echoed to the CLI/Shell window.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% DATAFILE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{The \amplot\ Datafile}
\label{ch:datafile}
\index{Datafile}\index{Commands}\index{ARexx}
Almost every feature available from the menus may also be set from within 
the datafile using simple command keywords. Many of these keywords may also be issued 
{\em via\/} the ARexx interface. All the available commands are shown 
together with valid ARexx commands in Table~\ref{tab:commands}. 
The commands may be in upper or lower case and may be abbreviated to the 
fewest letters necessary for the commands to be unambiguous. Note that 
commands coming from ARexx may {\em not\/} be abbreviated. In all cases 
where text is required, if more than one word is to be included,
the text must be enclosed in double inverted commas. For example, when 
setting the title of a graph:
\begin{verbatim}
      Title "A Graph Title" 0.0 0.0
\end{verbatim}

In the descriptions which follow, commands followed by a \dag\ are available {\em 
only\/} from ARexx; commands followed by a \ddag\ are available {\em only\/} from 
the datafile. All other commands are available from both. Table~\ref{tab:commands} 
shows command applicability in an easy-to-read format.

\begin{center}
\scriptsize
\begin{tabular}{lccc} \hline
                                 &           &        & Commands which     \\
                                 & \multicolumn{2}{c}{Commands used in} %
                                                      & do not cause the   \\ \cline{2-3}
Command                          & Datafile  & ARexx  & graph to replot.   \\ \hline
{\bf Data}                       &           &        &                    \\
COLUMNS  n                       &     x     &        &                    \\
NDATA  n                         &     x     &        &                    \\
NEWSET                           &     x     &        &                    \\ \hline
{\bf Output}                     &           &        &                    \\
EPSF                             &     x     &     x  &       x            \\
NOEPSF                           &           &     x  &       x            \\
OFFSET  x   y                    &     x     &     x  &       x            \\
SIZE  x   y                      &     x     &     x  &       x            \\ \hline
{\bf Pens}                       &           &        &                    \\
PALETTE  scrpen   r   g  b       &     x     &     x  &       x            \\
PEN  pen                         &     x     &     x  &       x            \\
SETPEN  pen   colour   thickness &     x     &     x  &                    \\
STYLE  style                     &     x     &     x  &       x            \\ \hline
{\bf Styles}                     &           &        &                    \\
BARCHART                         &     x     &     x  &                    \\
DATAPOINT  pen   mark   join     &     x     &     x  &                    \\
EJBY  percent                    &     x     &     x  &                    \\
EJECT  slicenum                  &     x     &     x  &                    \\
ERRORS                           &     x     &     x  &                    \\
EWIDTH  width                    &     x     &     x  &                    \\
GROUPED                          &     x     &     x  &                    \\
HATCH                            &     x     &     x  &       x            \\
HSPACE  space                    &     x     &     x  &       x            \\
HTHICK  thick                    &     x     &     x  &       x            \\
MARKSIZE  size                   &     x     &     x  &                    \\
NOERRORS                         &     x     &     x  &                    \\
NOSHRFIRST                       &           &     x  &                    \\
OUTLINE                          &     x     &     x  &                    \\
OVERLAYED                        &     x     &     x  &                    \\
PIE                              &     x     &     x  &                    \\
PSTART  degrees                  &     x     &     x  &                    \\
SCATTER                          &     x     &     x  &                    \\
SHADE                            &     x     &     x  &       x            \\
SHRFIRST                         &     x     &     x  &                    \\
SHRINK  val                      &     x     &     x  &                    \\
STACKED                          &     x     &     x  &                    \\
UNEJECT  slicenum                &           &     x  &                    \\
XY                               &     x     &     x  &                    \\ \hline
\end{tabular}
\normalsize
\end{center}
Table~\ref{tab:commands} Continued over\ldots

\begin{center}
\scriptsize
\begin{tabular}{lccc} \hline
                                 &           &        & Commands which     \\
                                 & \multicolumn{2}{c}{Commands used in} %
                                                      & do not cause the   \\ \cline{2-3}
Command                          & Datafile  & ARexx  & graph to replot.   \\ \hline
{\bf Fills}                      &           &        &                    \\
FALL                             &           &     x  &                    \\
FILL  num   x   y                &     x     &     x  &                    \\
NOFILLALL                        &     x     &     x  &                    \\
PFILL  num   angle               &     x     &     x  &                    \\ \hline
{\bf Axes}                       &           &        &                    \\
BOUNDS xmin xmax ymin ymax       &     x     &     x  &                    \\
BOXED                            &     x     &     x  &                    \\
CALCBOUNDS                       &           &     x  &                    \\
CALCTICKS                        &           &     x  &                    \\
CBOUNDS xmin xmax ymin ymax      &           &     x  &                    \\
CLIP                             &     x     &     x  &                    \\
FZERO                            &     x     &     x  &                    \\
GRID                             &     x     &     x  &                    \\
LOGX                             &     x     &     x  &                    \\
LOGY                             &     x     &     x  &                    \\
NOBOXED                          &           &     x  &                    \\
NOCLIP                           &     x     &     x  &                    \\
NOFZERO                          &           &     x  &                    \\
NOGRID                           &           &     x  &                    \\
SUBOFF                           &     x     &     x  &                    \\
SUBON                            &     x     &     x  &                    \\
SUBTICKS  x   y                  &     x     &     x  &                    \\
TICKS  x   y                     &     x     &     x  &                    \\ \hline
%  \end{tabular}
%  \normalsize
%  \end{center}
%  Table~\ref{tab:commands} Continued over\ldots
%  
%  \begin{center}
%  \scriptsize
%  \begin{tabular}{lccc} \hline
%                                   &           &        & Commands which     \\
%                                   & \multicolumn{2}{c}{Commands used in} %
%                                                        & do not cause the   \\ \cline{2-3}
%  Command                          & Datafile  & ARexx  & graph to replot.   \\ \hline
{\bf Labels and Titles}          &           &        &                    \\
BPLAB  n   text                  &     x     &     x  &                    \\
BPLOFF                           &           &     x  &                    \\
BPLON                            &           &     x  &                    \\
CENTXLAB                         &     x     &     x  &                    \\
KEYFONT  font   size             &     x     &     x  &                    \\
KEYPOS  x   y                    &     x     &     x  &                    \\
KEYTEXT  n   text                &     x     &     x  &                    \\
LABEL n str x y font size        &     x     &     x  &                    \\
LFONT  font   size               &     x     &     x  &                    \\
NOCENTXLAB                       &           &     x  &                    \\
NOXLAB                           &     x     &     x  &                    \\
NOYLAB                           &     x     &     x  &                    \\
PRECISION  xprec   yprec         &     x     &     x  &                    \\
TFONT  font   size               &     x     &     x  &                    \\
TITLE  str   x   y               &     x     &     x  &                    \\
XLAB                             &           &     x  &                    \\
XLABEL  str                      &     x     &     x  &                    \\
YLAB                             &           &     x  &                    \\
YLABEL  str                      &     x     &     x  &                    \\
XLFONT  font   size              &     x     &     x  &                    \\
YLFONT  font   size              &     x     &     x  &                    \\
XTFONT  font   size              &     x     &     x  &                    \\
YTFONT  font   size              &     x     &     x  &                    \\ \hline
\end{tabular}
\normalsize
\end{center}
Table~\ref{tab:commands} Continued over\ldots

\begin{table}[h]
\begin{center}
\scriptsize
\begin{tabular}{lccc} \hline
                                 &           &        & Commands which     \\
                                 & \multicolumn{2}{c}{Commands used in} %
                                                      & do not cause the   \\ \cline{2-3}
Command                          & Datafile  & ARexx  & graph to replot.   \\ \hline
{\bf Fitting}                    &           &        &                    \\
FOURIER  n                       &     x     &     x  &                    \\
NOFOURIER                        &           &     x  &                    \\
NOREGRESS                        &           &     x  &                    \\
NOREGWRITE                       &           &     x  &       x            \\
NOREXXFIT                        &           &     x  &                    \\
NOREXXWRITE                      &           &     x  &       x            \\
NOROBUST                         &           &     x  &                    \\
REGRESS  n                       &     x     &     x  &                    \\
REGWRITE                         &     x     &     x  &       x            \\
REXXFIT  n   path/macro          &     x     &     x  &                    \\
REXXWRITE                        &     x     &     x  &       x            \\
ROBUST                           &     x     &     x  &                    \\
RTOL  n                          &     x     &     x  &                    \\
TOL  n                           &     x     &     x  &                    \\ \hline
{\bf Miscellaneous Commands}     &           &        &                    \\
AUTOON                           &           &     x  &       x            \\
AUTOOFF                          &           &     x  &       x            \\
CBOUNDS xmin xmax ymin ymax      &           &     x  &                    \\
DATASET  dsetnum                 &           &     x  &                    \\
DRAW  x   y  [x   y]             &           &     x  &                    \\
DR2DPLOT  file                   &           &     x  &                    \\
EMPTY xmin xmax ymin ymax        &           &     x  &                    \\
ENDMACRO                         &           &     x  &       x            \\
ENDPLOT                          &           &     x  &       x            \\
GETVAR type [arraypos] variable  &           &     x  &                    \\
HPGLPLOT  file                   &           &     x  &                    \\
MACRO  path/macro                &     x     &        &                    \\
MARK  x   y   num                &           &     x  &                    \\
OPEN  file                       &           &     x  &                    \\
PSPLOT  file                     &           &     x  &                    \\
QUIT                             &           &     x  &                    \\
REPLOT                           &           &     x  &                    \\
SAVE  file                       &           &     x  &                    \\
SETVAR  val                      &           &     x  &                    \\ \hline
\end{tabular}           
\end{center}
\caption[Datafile and ARexx commands]{\label{tab:commands}Datafile and ARexx 
commands. Crosses 
in the appropriate columns indicate whether commands are available in a 
datafile or through ARexx. The final column indicates ARexx commands 
which do not cause the graph to replot.}
\end{table}
\clearpage

\section{Data control commands}
\index{Commands: Data control}
\begin{description}
\item[!$\ddag$] This is used to introduce a comment either at the beginning of a 
line or after a command and its parameters.
\item[NEWSET$\ddag$] This is used to introduce a new set of data, for multi-line 
graphs. Optionally, {\tt NEWSET} may be used before the first set of data.
\item[COLUMNS$\ddag$] This is followed by a single parameter representing the 
number of columns of data to be read. In most cases this will be 2 (which is the 
default) i.e.\ columns representing X and Y. If set to 1, the Y values will all be 
set to zero. This is used only for Pie charts. If set to 3, the third column of data 
will be used for the size of $\pm$ error bars. Thus the total size of each error 
bar will be twice this value. If set to 4, separate error values will be read for
the $+$ and $-$ error bars. The first value read (i.e.\ that in column 3) is the
negative error and the second value read (i.e.\ that in column 4) is the positive
error.
\item[NDATA$\ddag$] The {\tt NDATA} command is followed by a parameter used to specify 
the number of datapoints which may 
follow. This defaults to 100. If a dataset has more than 100 points, the {\tt NDATA}
command should be used to specify a greater maximum number. Alternatively, if you 
only have a few datapoints, you can set a value of {\tt NDATA} less than 100 
to conserve memory.
\end{description}

\section{Output}
\index{Commands: Output}
\begin{description}
\item[SIZE] This is followed by the X and Y dimension of your output graph
in inches. Note that this is the size of the axes; any axis  labels, titles, etc.\ 
will fall outside these dimensions. EPSF and IFF-DR2D plots may be scaled by the 
program which imports them.
\item[OFFSET] This is followed by the X and Y offset of the bottom left hand 
corner of the graph in inches. This command is ignored if you are producing EPSF or 
IFF-DR2D output.
\item[EPSF] Sets an output PostScript file to conform to the EPSF standard.
\item[NOEPSF$\dag$] Sets an output PostScript file to conform to the normal 
PostScript standard.
\end{description}

\section{Pens}
\index{Commands: Pens}
\begin{description}
\item[PEN] This is followed by the pen number (1--6) to be used for the current
dataset. If there is more than one dataset, this command should come after the
{\tt NEWSET} command (though it need not come immediately after).
\item[STYLE] This is followed by a line style (1--6) to be used for the current
dataset. If there is more than one dataset, this command should come after the
{\tt NEWSET} command (though it need not come immediately after).
\item[SETPEN] This is followed by the pen number (1--6), the colour (between  1 and 
the number of pens you have for HPGL plotting; 1--3 if you are not interested in HPGL 
output) and the thickness for the PostScript output (in points).
\item[PALETTE] This is followed by the screen pen number (0--3) and the R, G and B 
values for the screen pen (each between 0 and 15).
\end{description}

\section{Styles}
\index{Commands: Graph style}
\label{sec:styles}
\begin{description}
\item[XY] Specifies the default line graph style.
\item[SCATTER] Specifies a scatter plot.
\item[BARCHART] Specifies a barchart.
\item[PIE] Specifies a pie chart.
\item[ERRORS] Switch on error bars if a 3 column dataset has been used.
\item[NOERRORS] Switches off error bars (default).
\item[DATAPOINT] This is followed by the pen number (1--6), the datapoint mark
to be used by this pen (0--12) and a flag to indicate if this set of points should 
be joined (1) or not (0). The mark numbers are specified as follows:\\
0: no mark\\
1: cross\\
2: square\\
3: filled square\\
4: circle\\
5: filled circle\\
6: diamond\\
7: filled diamond\\
8: triangle\\
9: filled triangle\\
10: inverted triangle\\
11: filled inverted triangle\\
12: plus sign
\item[EWIDTH] This is followed by the width of the cross part of an error bar (in 
points). The pen and hence the width of the lines which form the error bars is the 
same as that used for the current dataset.
\item[MARKSIZE] This is followed by the size of datapoint marks (in points).
\item[SHRINK] This is followed by the bar shrinkage percentage used for overlayed 
and grouped bars.
\item[SHRFIRST] Specifies that all sets of bars should be shrunk in the overlayed 
style.
\item[NOSHRFIRST\dag] Specifies that the first barchart dataset should not be shrunk 
in the overlayed style.
\item[OVERLAYED] Specifies the overlayed bar style (default).
\item[OUTLINE] Specifies the outline bar style.
\item[GROUPED] Specifies the grouped bar style.
\item[STACKED] Specifies the stacked bar style.
\item[EJECT] This is followed by  a slice number for a slice to be ejected from a 
piechart. The slices are numbered from 1.
\item[UNEJECT\dag] This is followed by  a slice number for a slice to be reinserted into 
a piechart after being ejected.
\item[EJBY] This is followed by the percentage of the piechart diameter by which 
slices should be ejected.
\item[PSTART] This is followed by the angle at which a piechart should start. This 
defaults to 0\degree\ which is the right-pointing horizontal axis. 90\degree\ 
specifies up-pointing vertical axis, etc.
\item[HATCH] This specifies that fills should be hatched. This is the default for 
HPGL plots where shading cannot be used. Note that the screen display shows only 
shading.
\item[SHADE] This specifies that fills should be shaded. This is the default except 
in the case of HPGL plots where shading is not possible and this command will be 
ignored.
\item[HTHICK] This is followed by the hatch fill line thickness for PostScript, EPSF 
and IFF-DR2D output. The value is specified in points.
\item[HSPACE] This is followed by the hatch fill line spacing. The value is 
specified in points.
\end{description}

\section{Axes}
\index{Commands: Axes}
\begin{description}
\item[NOXLAB] Switches off the labels on the X-axis.
\item[BOXED]  Boxes the axes. The axes are drawn in Pen~6.
\item[NOBOXED\dag]  Switches off the box around the axes. 
\item[LOGX] Take logs (to base 10) of the X-axis data.
\item[LOGY] Take logs (to base 10) of the Y-axis data.
\item[BOUNDS] This is followed by the boundary values: XMin XMax YMin and YMax.
\item[CBOUNDS\dag] This is followed by XMin, XMax, YMin and YMax values. This works 
in much the same way as the {\tt BOUNDS} command, but the `best' clean bounds are 
calculated on these values.
\item[TICKS]  This is followed by the tick step size along X and Y.
\item[SUBTICKS]  This is followed by the subtick step size along X and Y.
\item[SUBON] Switches on axis subticks.
\item[SUBOFF] Switches off axis subticks.
\item[GRID] Switches on the grid across the graph. The grid is drawn in Pen~5.
\item[NOGRID\dag] Switches off the grid across the graph. 
\item[FZERO] Causes the axes to follow zero on the graph, rather than being 
placed along the bottom and left of the graph.
\item[NOFZERO\dag] Causes the axes to be placed along the bottom and left of the 
graph. (Default.)
\item[CLIP] Causes graph lines to be clipped at the bounds. (Default.)
\item[NOCLIP] Causes graph lines not to be clipped at the bounds.
\item[CALCBOUNDS\dag] Causes the default boundary calculation to be reinstated.
\item[CALCTICKS\dag] Causes the default tick and subtick calculation to be reinstated.
\end{description}

\section{Labels and Titles}
\index{Commands:Text}
\begin{description}
\item[XLABEL] This is followed by a label for the X-axis. If this is more than 
one word, it should be enclosed in double inverted commas.
\item[YLABEL] This is followed by a label for the Y-axis. If this is more than 
one word, it should be enclosed in double inverted commas.
\item[LFONT] This is followed by a font and point size which will be used for X and Y 
axis labels and titles. This command is retained for compatibility with {\bf AMPlot} 
V1.0. \amplot\ now has separate commands to set the font for each of these items.
\item[XTFONT] This is followed by the font and point size for the X axis title.
\item[YTFONT] This is followed by the font and point size for the Y axis title.
\item[XLFONT] This is followed by the font and point size for the X axis labels.
\item[YLFONT] This is followed by the font and point size for the Y axis labels.
\item[TITLE] This is followed by a string for the graph title (in double inverted 
commas if more than one word) and the X and Y coordinates of the bottom centre of 
the string. 
\item[TFONT] This is followed by the font and point size for the title.
\item[LABEL] This is followed by a label number, a string (in double inverted 
commas if more than one word), the X and Y coordinates of the label, the font
name and font point size. 
\item[XLAB\dag] Switches on labels on the X-axis. (Default.)
\item[NOXLAB] Switches off labels on the X-axis.
\item[CENTXLAB] Centres x-axis labels. Used mainly for barcharts.
\item[NOCENTXLAB\dag] Switches off centering of X-axis labels. (Default.)
\item[YLAB\dag] Switches on labels on the Y-axis. (Default.)
\item[NOYLAB] Switches off labels on the Y-axis.
\item[PRECISION] This is followed by the precision for the X and Y-axes. If the 
values are positive, the labels will be displayed in normal numeric format with the 
number specifying the number of decimal places. If negative, numbers will be 
displayed in exponential  form. With log axes, only the sign of the precision is 
important.
\item[BPLAB] This is followed by a number for the bar or pie slice to be labelled
and by the text for that label. If this is more than one word, it should be enclosed 
in double inverted commas. The bars or pie slices are numbered from 1. When 
specified in a datafile, this command will 
automatically switch on bar labels for display. Note that bar/pie labels are not 
available if any dataset contains more than 100 items.
\item[BPLOFF\dag] Switches off bar or pie labels.
\item[BPLON\dag] Switches on bar or pie labels.
\item[KEYPOS] This is followed by the X and Y position for the start of the key.
\item[KEYFONT] This is followed by the font and point size for the key.
\item[KEYTEXT] This is followed by a dataset number and the text for the key for 
this dataset. If the text contains more than one word, it should be enclosed 
in double inverted commas.
\end{description}

\section{Fills}
\index{Commands: Fills}
\begin{description}
\item[NOFILLALL] Do not fill all bars in a dataset. i.e.\ a fill must be 
specified for each bar in turn.
\item[FALL\dag] Fill all bars in a dataset. i.e.\ a fill need only be specified in one 
bar of a dataset for the whole dataset to be filled. (Default.)
\item[FILL] This is followed by the fill shade (1--6, light to dark)
and X and Y coordinates 
about which to perform a fill. This command is not used for Pie charts, where
{\tt PFILL} should be used.
\item[PFILL] This is followed by the fill shade (1--6, light to dark)
and an angle (in degrees).
{\tt PFILL} is used only for Pie charts and the slice of pie at this angle will be 
filled. The angle is defined in the standard manner as the anti-clockwise angle
from the X-axis (i.e.\ the right-pointing  horizontal axis).
\end{description}

\section{Fitting}
\index{Commands: Fitting}
\begin{description}
\item[REGRESS] This is followed by an integer between 2 and 20 to set the degree 
of the polynomial to be used.
\item[TOL] This is followed by the tolerence to be used in the regression fitting.
\item[REGWRITE] Causes fitting data to be written to the file\\
{\tt AMPlotFit.data}.
\item[NOREGWRITE\dag] Switches off the fitting data writing option.
\item[NOREGRESS\dag] Switches off regression fitting.
\item[ROBUST] Switches on robust straight line fitting.
\item[NOROBUST\dag] Switches off robust straight line fitting.
\item[FOURIER] This is followed by a smoothing factor for use in Fourier 
smoothing.
\item[NOFOURIER\dag] Switches off Fourier smoothing.
\item[REXXFIT] This is followed by an integer between 2 and 20 to set the degree 
of the ARexx polynomial to be used and the name of the function macro. This must 
include the full device and path name for the macro.
\item[RTOL] This is followed by the tolerence to be used in the ARexx regression 
fitting.
\item[REXXWRITE] Causes ARexx fitting data to be written to the file 
{\tt AMPlotRexxFit.data}.
\item[NOREXXWRITE\dag] Switches off the ARexx fitting data writing option.
\item[NOREXXFIT\dag] Switches off ARexx regression fitting.
\end{description}

\section{Miscellaneous Commands}
\index{Commands: Miscellaneous}
\begin{description}
\item[MACRO\ddag] This is followed by the name of an ARexx macro to be installed.
This {\em must\/} include the full device and path name for the macro.
\item[MARK\dag] This is followed by the X and Y-coordinates at which a datapoint mark 
should be placed and the mark style number as described in Section~\ref{sec:styles} 
for the {\tt DATAPOINT} command.
\item[DRAW\dag] This is followed by 2 or 4 parameters. If 2 parameters are given,
a line is 
drawn from the current position to these coordinates. If 4 parameters are given they 
are the start coordinates and end coordinates of a line. If the start coordinates 
are identical to the end coordinates, the command is treated as a `move' rather than 
a `draw' command and the current coordinates are simply updated without drawing 
anything onto the graph. The {\tt PEN} command may be given first to define the pen 
to be used.
\item[OPEN\dag] This is followed by the name of a datafile to read and plot.
\item[SAVE\dag] This is followed by the name of a datafile to write.
\item[PSPLOT\dag] This is followed by the name of  a PostScript file to plot. All 
plotting will be directed to the PostScript file until an {\tt ENDPLOT} command is 
given.
\item[HPGLPLOT\dag] This is followed by the name of an HPGL file to plot. All 
plotting will be directed to the HPGL file until an {\tt ENDPLOT} command is 
given.
\item[DR2DPLOT\dag] This is followed by the name of an IFF-DR2D file to plot. All 
plotting will be directed to the DR2D file until an {\tt ENDPLOT} command is 
given.
\item[QUIT\dag] Causes \amplot\ to exit.
\item[DATASET\dag] This is followed by an integer to specify the current dataset to 
be used for calls to {\tt GETVAR}. 
\item[GETVAR\dag] This is followed by 2 or 3 parameters. The first parameter is one 
of the following keywords:
   \begin{center}
   \begin{tabular}{ll}
   NDATA & Number of points in current dataset. \\
   NDSET & Number of datasets.                  \\
   XMIN  & Current graph X minimum.             \\
   XMAX  & Current graph X maximum.             \\
   YMIN  & Current graph Y minimum.             \\
   YMAX  & Current graph Y maximum.             \\
   X     & X data value.                        \\
   Y     & Y data value.                        \\
   EP    & Positive error data value.           \\
   EM    & Negative error data value.           \\
   \end{tabular}
   \end{center}
The final parameter is the name of an ARexx variable into which the requested value 
will be deposited using the ARexx direct variable interface. In the case of the last 
four keywords ({\tt X}, {\tt Y}, {\tt EP} and {\tt EM}), a third parameter placed 
between the other two is used to specify the data item to be accessed since these 
are all stored as arrays. For example:
\begin{verbatim}
      GETVAR NDATA N
\end{verbatim}
will get the number of datapoints in the current dataset into the ARexx variable 
{\tt N}.
\begin{verbatim}
      GETVAR X 1 XVAL
\end{verbatim}
will get the first X-datapoint in the current dataset into the ARexx variable 
{\tt XVAL}.
The example ARexx script {\tt Invert.rexx} in the {\tt Samples} directory shows {\tt 
GETVAR} in action. The script displays your current graph as a line plot and reads 
the data from \amplot\ and plots it back inverted using the {\tt DRAW} command.
\item[EMPTY\dag] This is followed by the XMin, XMax, YMin and YMax values to create 
an `empty' graph. This simply consists of empty graph bounds allowing you to plot 
exclusively from ARexx.
\item[SETVAR\dag] This is used exclusively for setting return values for the 
evaluation of fitting functions using ARexx. See Chapter~\ref{ch:rxfit} for details.
\item[ENDPLOT\dag] This is used to close plotfiles opened with {\tt PSPLOT}, {\tt 
HPGLPLOT} or {\tt DR2DPLOT}.
\item[ENDMACRO\dag] This is used to end an installed macro. If you forget this 
command, \amplot\ will appear to lock up (with the `WAIT' cursor). Should this 
happen, you should open a CLI/Shell and issue the command:
\begin{verbatim}
      rx 'address "AMPlot.1" endmacro'
\end{verbatim}
This will cause \amplot\ to exit its loop in which it waits for a macro to finish.
\item[AUTOON\dag] This switches on auto replotting after ARexx commands which alter 
the graph format. (Default.)
\item[AUTOOFF\dag] This switches off auto replotting after ARexx commands which alter 
the graph format.
\item[REPLOT\dag] This will cause the graph to replot when the {\tt AUTOOFF} keyword 
has been used to stop replotting from happening automatically.
\end{description}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% FONTS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Fonts and Text}
\label{ch:fonts}

\section{PostScript Fonts}
You\index{PostScript,Fonts} may specify any font you have available on 
your printer. Typical fonts and styles are shown in Table~\ref{tab:fonts}. 
PostScript is case sensitive when specifying font names. However, \amplot\ will
automatically capitalise the first letter of the font name, the first letter after a 
`--' and of the words Roman, 
Bold, Italic and Oblique. In addition, you may specify `Times' rather than
`Times--Roman'; the `--Roman' will be added by the program.
The\index{fonts} Amiga will display any font it doesn't know as Times.
You may use Amiga fonts other than Times and Helvetica, although, unless you have 
fonts of these names on your PostScript printer, you will not be able to print 
them.
\begin{table}
\begin{center}
\begin{tabular}{|l|l|} \hline
Helvetica                & Times--Roman        \\
Helvetica--Bold          & Times--Bold         \\
Helvetica--Oblique       & Times--Italic       \\
Helvetica--BoldOblique   & Times--BoldItalic   \\ \hline
\end{tabular}
\end{center}
\caption[Typical PostScript Fonts]{\label{tab:fonts}Typical PostScript fonts 
available on most PostScript printers and emulators. These are Adobe fonts and 
non-Adobe printers and emulators may have lookalike fonts, though typically they 
will also recognise these names.}
\end{table}

\section{Font Translation}
\amplot\ provides a font translation table\index{font translation} for specifying 
screen fonts and HPGL\index{HPGL}
fonts. Two examples of the translation table are provided: {\tt amplot.ftrans.V2.0} 
and {\tt amplot.ftrans.V1.3}. The install procedures will copy the appropriate 
version to {\tt amplot.ftrans} in your {\tt S:}\ directory. When \amplot\ starts it 
looks for {\tt amplot.ftrans} first in your current directory, then in the {\tt S:}\ 
directory. The file is read only on program startup; if you alter the file, you must 
restart \amplot.

The file is free format and contains three columns. Each line must contain the 
following three pieces of information.
\begin{itemize}
\item A PostScript or IFF-DR2D fontname.
\item The equivalent screen font.
\item The equivalent HPGL font number.
\end{itemize}
Using this table, you can select the best screen font to display for each PostScript 
or IFF-DR2D font name. Note that the screen fonts are specified without the 
{\tt .font} part of the name. Fonts in HPGL are simply specified by number. 
Thus, you must also give a number for HPGL output. You should try to select an HPGL 
font which looks something like the PostScript font.

The table also provides a further important function. You should specify a 
PostScript font name of `Alternate'. This is followed not by an equivalent screen 
font, but by your chosen alternate font and HPGL font number. The alternate font is 
normally used for Greek characters and mathematical symbols and you would normally 
select the PostScript {\bf Symbol} font. The following section explains how you 
should access the alternate font.

If a font is not found in the translation table, a simple translation scheme is 
applied which just drops any part of the font name after a {\bf .}, or {\bf --}.
If no Amiga font is found with this name, the Times font is used.


\section{Special Characters}
\amplot\ allows\index{special characters} you to introduce two types of special 
characters into any piece of 
text which you can control directly (i.e.\ titles, extra labels, etc.). Note that 
these special characters will {\em not\/} appear on the screen display; the normal 
Roman style character will appear.

The first 
type or character is a superscript\index{superscript} or subscript\index{subscript}.
To produce a superscript, use a 
\verb1^1; to produce a subscript, use a \verb1_1. If you need to raise or lower a 
group of characters, enclose them in curly brackets. For example, the Y-axis title of 
your graph might be:
$$ y = a + bx_1 + cx^{12} $$
To obtain this label, you should enter the following title into the {\bf Text/Axis 
Titles} requester:
\begin{verbatim}
                  y = a + bx_1 + cx^{12}
\end{verbatim}

The second type of character is one from an alternate font. Typically, you might 
wish to include Greek\index{Alternate font, Greek} characters. These are supplied 
in the PostScript {\bf Symbol} 
font. To obtain characters from the alternate font, you should precede  the normal 
character with a backslash. The exact mapping of normal Roman style font characters 
to the alternate font will depend on the font you select. If we assume that the 
letter `a' will generate the character $\alpha$ in the alternate font and you wish 
to produce the label:
$$ y = 3\alpha x + x^2 $$
you would enter the label as:
\begin{verbatim}
                  y = 3\ax + x^2
\end{verbatim}
Note that you must place a backslash before every character to be in the alternate 
font; you cannot group characters using curly brackets.

The font translation table described in the previous section is used to specify the 
alternate font.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% TOOLTYPES %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Icon Tooltypes}
\label{ch:tooltypes}

Icon tooltypes\index{tooltypes} are used to set various defaults for the program. 
The tooltypes 
are shown in Table~\ref{tab:tooltypes}. The exact procedure to alter an icon 
tooltypes depends whether you have AmigaDOS~V2.0 or AmigaDOS~V1.3. 

\noindent{\bf AmigaDOS~V2.0:}\\
Click once on the \amplot\ program icon. Select {\bf Information} from the 
Workbench {\bf Icon} menu (or use the Intuition-provided keyboard shortcut \RA{I}). 
The information 
window will then appear which contains a group of text items with a slider to move 
through them. Click once on the one you wish to alter and it will be duplicated in 
the text gadget below. You can now alter this as required and hit the return key to 
return the altered version to the list of tooltypes. Click on and alter any other 
tooltypes as required. Click the {\bf Save} gadget when you have finished making 
changes.

\noindent{\bf AmigaDOS~V1.3:}\\
Click once on the \amplot\ program icon. Select {\bf Info} from the 
Workbench's {\bf Workbench} menu. The information window will then appear. 
Next to the label `Tool Types' is a pair of arrows pointing up and down. By 
clicking on these, you can step through the icon's tooltypes. Select the tooltype
you wish to change and alter it as required. Move to another tooltype and alter it as 
required. Click the {\bf Save} gadget when you have finished making changes.
\vspace{1em}

Some of the tooltypes for the icon supplied with \amplot\ are shown in parentheses. 
This is a simple way of commenting out a tooltype---these tooltypes are not active; 
simply remove the parentheses if you wish to use the tooltype.

All tooltypes which take one or more parameters are followed by an = sign before the
parameters. The use of each icon tooltype is as follows.

\begin{table}
\begin{center}
\small
\begin{tabular}{ll} \hline
Tooltype                      &   Function                                 \\ \hline
Size=x y                      &   Set default output dimensions            \\
Offset=x y                    &   Set default output offset                \\
HPGLMargin=x y                &   Define HPGL paper margins                \\
Title=Font Size               &   Default title font and size              \\
XTitle=Font Size              &   Default X-axis title font and size       \\
YTitle=Font Size              &   Default Y-axis title font and size       \\
XLabel=Font Size              &   Default X-axis label font and size       \\
YLabel=Font Size              &   Default Y-axis label font and size       \\
Key=Font Size                 &   Default Key font and size                \\
Extralabel=Font Size          &   Default Extra label font and size        \\
Hatching=ON$\mid$OFF          &   Use hatching or shading                  \\
HatchControl=thick space      &   Thickness and spacing of hatching        \\
Pen0=r g b                    &   Pen colours                              \\
Pen1=r g b                    &                                            \\
Pen2=r g b                    &                                            \\
Pen3=r g b                    &                                            \\
DIR=directory                 &   Default directory                        \\
NOSHANGHAI                    &   Switch off shanghai under V2.0           \\ 
AXISBOUNDS                    &   Use axes as limits for EPSF bounding box \\ \hline
\end{tabular}
\end{center}
\caption[Icon tooltypes]{\label{tab:tooltypes} Icon tooltypes which may be used
to specify various defaults.}
\end{table}

\section{Size}
This specifies the default plot size and is followed by the horizontal and vertical 
dimensions in inches. The default may be over-ridden using the {\bf Project/Paper} 
menu item. If the tooltype is not specified, the internal \amplot\ default 
is $x=4.625$, $y=3.0$.

\section{Offset}
This specifies the default position of the plot and is followed by the horizontal 
and vertical offset in inches. This offset is not used by EPSF or IFF-DR2D output 
styles. The default may be over-ridden using the {\bf Project/Paper} menu item.
If the tooltype is not specified, the internal \amplot\ default is 
$x=2.5$, $y=7.4$.

\section{HPGLMargin}
This specifies the unplottable margin on an HPGL plotter. These values should be 
altered for your particular plotter to ensure that your specified offset matches the 
distance of the bottom left of the graph from the bottom left of the paper. If the 
tooltype is not specified, the internal \amplot\ default is $x=0.58$, $y=0.1465$.
There is no way within \amplot\ to over-ride these values.

\section{Title}
This specifies the default font typeface and size for the graph title.  If the 
tooltype is not specified, the internal \amplot\ default is 14pt Times-Roman.
This default may be over-ridden using the {\bf Text/Title} menu item.

\section{XTitle}
This specifies the default font typeface and size for the X-axis title.  If the 
tooltype is not specified, the internal \amplot\ default is 10pt Times-Roman.
This default may be over-ridden using the {\bf Text/Axis Titles} menu item.

\section{YTitle}
This specifies the default font typeface and size for the Y-axis title.  If the 
tooltype is not specified, the internal \amplot\ default is 10pt Times-Roman.
This default may be over-ridden using the {\bf Text/Axis Titles} menu item.

\section{XLabel}
This specifies the default font typeface and size for the X-axis labels.  If the 
tooltype is not specified, the internal \amplot\ default is 10pt Times-Roman.
This default may be over-ridden using the {\bf Text/Axis \& Pie Labels} menu item.

\section{YLabel}
This specifies the default font typeface and size for the Y-axis labels.  If the 
tooltype is not specified, the internal \amplot\ default is 10pt Times-Roman.
This default may be over-ridden using the {\bf Text/Axis \& Pie Labels} menu item.

\section{Key}
This specifies the default font typeface and size for the key.  If the 
tooltype is not specified, the internal \amplot\ default is 10pt Times-Roman.
This default may be over-ridden using the {\bf Text/Key} menu item.

\section{Extralabel}
This specifies the default font typeface and size for extra labels.  If the 
tooltype is not specified, the internal \amplot\ default is 10pt Times-Roman.
This default may be over-ridden using the {\bf Text/Extra Labels} menu item.

\section{Hatching}
This specifies whether hatching or shading should be used for fills. `Hatching=ON'
should be used if you wish to use hatching by default. `Hatching=OFF' has the same 
effect as not specifying the icon tooltype: shading will be used by default.
This default may be over-ridden using the {\bf Lines/Fill Control} menu item.

\section{HatchControl}
This specifies the thickness (for PostScript, EPSF and IFF-DR2D output) and  spacing 
of hatch lines. Both values are specified in points. If the tooltype is not 
specified, the internal \amplot\ default is thickness $= 0.5$, spacing $= 2.0$.
This default may be over-ridden using the {\bf Lines/Fill Control} menu item.

\section{Pen0, Pen1, Pen2, Pen3}
These tooltypes are used to specify the default screen palette. In each case, three 
parameters specifying the red, green and blue components of the colour are given. In 
each case, these are values between 0 and 15.
These defaults may be over-ridden using the {\bf Project/Screen Palette} menu item.

\section{DIR}
This tooltype specifies the default directory which \amplot\ uses for all its file 
requesters. If the tooltype is not specified, the internal \amplot\ default is to 
use the current directory from which \amplot\ was run.
There is no way to over-ride this default within \amplot.

\section{NOSHANGHAI}
This tooltype stops \amplot\ from switching on Shanghai mode under AmigaDOS~V2.0 
when a datafile is edited from within \amplot. This is useful if your preferred 
editor opens on the Workbench, but refuses to be Shanghai'd. \amplot's AmigaDOS~V1.3
behaviour of bringing the Workbench to the front will then occur instead.
Note also that Lattice LSE will not run if \amplot\ has been started from the 
Workbench, unless you copy the files {\tt lse.dat}, {\tt lse.msg} and 
{\tt lse.hlp} to the directory in which you have \amplot.
There is no way to over-ride the Shanghai default within \amplot.

\section{AXISBOUNDS}
When producing EPSF output, \amplot\ will normally set the bounding box to encompass 
the whole plot. Setting this tooltype will cause the bounding box to match the 
dimensions of the graph axes. Depending on the program used to import the file, this 
may make it easier to place your plot accurately on the page.
   
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Rexx Fitting %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{The ARexx Interface}
\label{ch:rxfit}
\section{General Notes}
The commands available from ARexx have been described in detail in 
Chapter~\ref{ch:datafile}.

The ARexx\index{ARexx} port name is {\tt AMPlot.n}, where {\tt n} is the 
invocation number. 
Thus, the first time you run \amplot, {\tt n} will be 1; if you start \amplot\ 
again without quitting from the first invocation, {\tt n} will be 2. The port 
name for the current invocation of the program is shown using in the requester 
displayed using the {\bf Project/About} menu item.

Installed and one-off macros used from within \amplot\ {\em must\/} have a full device
and path name specified. i.e.\ there must be a colon ({\tt :}) in the name. For 
example, if \amplot\ is stored in the directory {\tt Work:amplot} and you have a 
macro in that directory called {\tt print.rexx}, you must specify the macro name as\\
{\tt Work:amplot/print.rexx} and not simply {\tt print.rexx}. Normally, the file
requester used to set macro names will have a valid full path name in the path string
gadget, so this will work without any problems.

Installed macros {\em must\/} end with the command {\tt ENDMACRO}. If you omit this 
command, \amplot\ will appear to lock up with a `Wait' cursor---the program is 
waiting for the {\tt ENDMACRO} command. Should this occur, you must send the command 
to \amplot's ARexx port manually. Open a CLI/Shell and issue the command:
\begin{verbatim}
      rx 'address "AMPlot.1" endmacro'
\end{verbatim}
(Clearly, {\tt AMPlot.1} should be replaced with {\tt AMPlot.2} if this is the 
second invocation.)

There are certain restrictions on commands which may be placed 
in installed ARexx macros. For example, you cannot use a {\tt PSPLOT} ARexx 
command which would cause a PostScript plot to be generated {\em every\/} 
time the graph replotted.
\newpage

The following commands are prohibited with installed macros:
\begin{center}
\begin{tabular}{l}
SAVE     \\
OPEN     \\
PSPLOT   \\
HPGLPLOT \\
DR2DPLOT \\
MACRO    \\
\end{tabular}
\end{center}

Because both installed and one-off macros share the same ARexx port, once 
a macro is installed these commands will be disabled whether they come 
from the installed or a one-off macro. For example, the one-off macro {\tt
plot.rexx} in the {\tt Samples} directory will not work correctly if another 
macro is installed since it uses the {\tt PSPLOT} ARexx command. Should you need 
to use commands such as {\tt PSPLOT} in a one-off macro therefore, you cannot use 
installed macros at the same time. Instead, the macro you would have installed 
must be called from within your one-off macro, after the {\tt PSPLOT} command and 
before {\tt ENDPLOT}.

\section{Fitting With ARexx}
\amplot\ allows\index{ARexx,ARexx Fitting} you to fit any function using the 
Singular Value Decomposition 
linear regression routines in the program. The program contains a built-in simple 
polynomial of the form:
$$ y = a + bx + cx^2 + dx^3 + ex^4 + \ldots $$
Should you wish to fit a more complex function, you may do so by writing the 
function in ARexx. The ARexx function which you supply calculates basis functions 
for the current value of $x$. The number of basis functions to be calculated is 
defined by the polynomial degree specified in the ARexx fitting requester.

\amplot\ will set two ARexx `clip' variables: 
\begin{quote}
{\tt AMPLOTX} and {\tt AMPLOTNP}. 
\end{quote}
The first of these is the $x$ value at which the basis functions are to be evaluated; 
the second is the number of values which must be returned (the polynomial degree).
Having evaluated the basis functions, their values are returned to \amplot\ using 
the {\tt SETVAR} command. Exactly the right number of {\tt SETVAR} commands must be 
supplied and these must be given in the normal order of ascending power of $x$.
\amplot\ will lock up until the correct number of {\tt SETVAR} commands has been 
given. No {\tt ENDMACRO} command is required.

The following example shows how the simple polynomial which is built into the 
program can be written as an ARexx function.

\begin{verbatim}
/* ARexx macro for AMPlot fitting to fit a general
   polynomial.
*/

/* Get the value of x and the number of polynomials   */
x  = getclip('AMPLOTX')
np = getclip('AMPLOTNP')

/* Send commands to AMPlot                            */
address "AMPlot.1"

/* Use an array called P to store the basis functions */
P.1 = 1.0
do j=2 to np
   k   = j-1
   P.j = P.k * x
end

/* Now use SETVAR to send these values back to AMPlot */
do j=1 to np
   SETVAR P.j
end
\end{verbatim}
\newpage

The next example shows a slightly more complex example and fits Legendre polynomials.

\begin{verbatim}
/* ARexx macro for AMPlot fitting to fit Legendre 
   polynomials evaluated using the recurrence relation.
*/

/* Get the value of x and the number of polynomials   */
x  = getclip('AMPLOTX')
np = getclip('AMPLOTNP')

/* Send commands to AMPlot                            */
address "AMPlot.1"

/* Use an array called P to store the basis functions */
P.1 = 1.0
P.2 = x

if np > 2 then do
   twox = 2.0 * x
   f2   = x
   d    = 1.0
   
   do j=3 to np
      f1  = d
      f2  = f2 + twox
      d   = d + 1.0
      k   = j-1
      l   = j-2
      P.j = (f2 * P.k - f1 * P.l) / d
   end
end

/* Now use SETVAR to send these values back to AMPlot */
do j=1 to np
   SETVAR P.j
end
\end{verbatim}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% V1.0 Notes %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Notes for AMPlot V1 Users}
Every effort has been made to maintain compatibility with {\bf AMPlot} V1.0 and in
most cases datafiles from the earlier version of the software will generate 
identical plots. The only major difference is in labelling pie charts. The 
coordinate system used for labelling pie charts has now changed so labels will be 
placed incorrectly if old datafiles are used. The new system places the origin of 
the coordinate system at the centre of the pie which has a radius of 100.0 units. 
This makes the placing of labels much easier than with the old system.

In addition, automatic placement of piechart labels used to be handled {\em via\/}
the {\bf Extra Labels} requester. This is now performed by the {\bf Bar \& Pie Labels}
requester. You may still use the {\bf Extra Labels} requester to place further
labels on the piechart.

There are a few other minor variations which will cause differences in plots when
old datafiles are used.
The {\tt GRID} keyword no longer automatically switches on the boxed option. It is
thus necessary to add the {\tt BOXED} keyword to your datafile, or to switch on the
box using the {\bf Axes/Boxed} menu item.
The {\tt SUBON} keyword must now be specified with the {\tt GRID} option to obtain 
grid lines and labels (where the axis spans only one log unit) at minor ticks of 
log axes. Graphs are now clipped at the axis bounds by default. The {\tt NOCLIP} 
commands should be added to the datafile or the {\bf Clip} checkbox of the {\bf 
Axes/Set Axes} requester should be switched  off to restore the behaviour to that 
seen in {\bf AMPlot} V1.0.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% HISTORY %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{History of \amplot}
\amplot\ was inspired by a simple graph plotting program named CURVY written by 
Dr.\ Andrew J.\ McLachlan of the M.R.C.\ laboratory in Cambridge. CURVY was 
written in FORTRAN for the VAX computer using a plotting library called PLOT84.
The first version of \amplot\ was written in 1989 to accept data files in the 
same format used by CURVY, processing a subset of its commands, but producing 
PostScript output. The original version of {\bf AMPlot} was written in generic
portable C on the Amiga, so that the program could be compiled and run on any 
computer. During 1990, the menu interface, full command interface and additional 
features such as bar charts, pie charts, curve fitting routines and datapoint marks 
were added. \amplot\ was a complete re-write performed in 1992 adding many new 
features including HPGL and DR2D output, ARexx support and the 3D-look interface.

The 3D-look interface was written using the {\bf STSLib} gadget and menu library 
which is also available from {\sf SciTech Software}.

\amplot\ was developed by Dr.\ Andrew Martin on an Amiga 3000/25/100 computer.
The manual was produced using Amiga\TeX\ (Radical Eye Software) and \LaTeX.

{\sf SciTech Software} acknowledges the use of Charlie Heath's file requester and
the palette requester from the copyrighted, but freely distributable
`The Amiga Programmer's Suite Book~1' by R.\ J.\ Mical which is available on Fish 
Disk~107.

The following is quoted from the documentation accompanying the file
requester:
\begin{quotation}
***	This material is copyright (c) 1986 by C. Heath of Microsmiths, Inc.
Permission is granted to use these files in any way with the following
exceptions:
\begin{enumerate}
\item The files shall not be posted on any telecommunications service, public
or private, except for BIX until January 15, 1987.

\item The files may only be distributed in archive format, with no modifications.
If you make any improvements on the file requester and would like to
generally distribute them, please contact ``cheath'' on BIX, or write to:
	Microsmiths Inc, PO Box 561, Cambridge, MA 02140

\item The requester may be used in any commercial product, but must be in
object code format.  You are free to make modifications for use in your
product.  Permission is granted to Lattice, Inc, and to Manx, Inc, to
include the source files in archive format.
\end{enumerate}

	Thank you, and enjoy.
   
		\ldots cheath

\end{quotation}

\newpage
\input{amplot.index}
\newpage
\thispagestyle{empty}
\begin{center}
\Large\amplot\bf\ Registration Form
\end{center}
\vspace*{1ex}
Please complete this registration form and return to {\sf SciTech Software}, 23 
Stag Leys, Ashtead, Surrey, U.K., KT21 2TD.
\vspace*{3em}

Name:\hrulefill

Address 1:\hrulefill

Address 2:\hrulefill

Town:\hrulefill

County:\hrulefill

Postcode:\hrulefill

\vspace*{2em}

Principal use of this software:

SCIENTIFIC / BUSINESS / EDUCATION / OTHER\hrulefill

Computer: A500 / A500+ / A600 / A1000 / A1500 / B2000 / A2500 / A3000 / A3000T

Memory:\hrulefill

Operating System: V1.3 / V2.0 / V2.04 / OTHER\hrulefill

Display Enhancer:\hrulefill

Hard Disk:\hrulefill

Printer:\hrulefill

Other Hardware:\hrulefill

\newpage
\thispagestyle{empty}
\begin{center}
\Large\amplot\bf\ Bug Report
\end{center}
\vspace*{1ex}
Please complete this form and return to {\sf SciTech Software}, 23 
Stag Leys, Ashtead, Surrey, U.K., KT21 2TD.
\vspace*{3em}

Name:\hrulefill

Address 1:\hrulefill

Address 2:\hrulefill

Town:\hrulefill

County:\hrulefill

Postcode:\hrulefill
\vspace*{2em}

Computer: A500 / A500+ / A600 / A1000 / A1500 / B2000 / A2500 / A3000 / A3000T

Memory:\hrulefill

Operating System: V1.3 / V2.0 / V2.04 / OTHER\hrulefill

Other Software Running Concurrently:\hrulefill
\vspace*{1em}

Please describe the error or bug you are seeing and {\em enclose a data file which
causes this problem}.
If this is an internal error (the software has exited, asking you to report an 
internal error), please write the error number and enclose a data file.
\vfill\vfill
\begin{center}
Thankyou for your assistance 
\end{center}

\newpage
\thispagestyle{empty}
\begin{center}
\Large\amplot\bf\ Enhancement Request
\end{center}
\vspace*{1ex}
Please complete this form and return to {\sf SciTech Software}, 23 
Stag Leys, Ashtead, Surrey, U.K., KT21 2TD.
\vspace*{3em}

Name:\hrulefill

Address 1:\hrulefill

Address 2:\hrulefill

Town:\hrulefill

County:\hrulefill

Postcode:\hrulefill
\vspace*{2em}

If there are any new features you would like to see incorporated in the software,
please detail them below. All requests will be considered for addition to the 
next version of the software.
\vfill\vfill
\begin{center}
Thankyou for your assistance
\end{center}
\end{document}
